<html>
    <head>
    <link rel='stylesheet' href='../main.css' type='text/css'>
        <title>Stats</title>
    </head>
    <body id='body'>
<div id='nav'>
<a href='../index.html'>Home</a></div>
<div id='tag_title' title='com.yahoo.dtf.actions.stats.Stats'>Stats</div>
<div id='tag_description'>
The stats tag is capable of calculating some statistical 
               analysis over the events identified in the result set of the 
               attribute <code>cursor</code>. The calculated statistics are 
               thrown as events to be used by the testcase as it best sees fit.</div>
<div class='tag_events_label'>Events</div><div class='tag_events'><div class='tag_event'><div class='tag_event_name'>cursor Event</div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>csv_dur</div><div class='tag_event_attribute_value'>This property contains a CSV contents for all of the 
                      latencies for the events sampled including the number
                      of times it occurred like so:
                     
                      <pre> 
                      23,455
                      50,412
                      100,20
                      </pre>
                     
                      Where the first column is the latency (duration in ms)
                      and the second column is the number of events that had
                      this duration. With this you can easily generate a 
                      graph using gnuplot, with the following gnuplot script
                      and having outputted the property into a file called
                      "latency.data":
                     
                      <pre>
                      set title "Latency graph of some sample data"
                     
                      set xdata time
                      set timefmt "%s"
                     
                      set terminal png
                      set output "graph.png"
                     
                      set xlabel 'Number of events'
                      set ylabel 'Duration (ms)'
                     
                      plot 'latency.data' using 1:2 with linespoints title 'latencies'
                      </pre>
                      
                      You can also easily import the CSV file into your 
                      favorite spreadsheet software and generate any graphs 
                      you'd like.</div></div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>MONITOR_states</div><div class='tag_event_attribute_value'>Generated only when you have used the monitor attribute
                      and will contain a comma separated list of the various
                      states that specific field had. the MONITOR name is 
                      replaced with the name of the fields you were monitoring.</div></div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>max_dur</div><div class='tag_event_attribute_value'>The maximum duration of any event in milliseconds 
                      recorded will be saved in this attribute.</div></div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>avg_dur</div><div class='tag_event_attribute_value'>The average duration of any event in milliseconds 
                      recorded will be saved in this attribute.</div></div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>tot_dur</div><div class='tag_event_attribute_value'>The total duration of any event in milliseconds recorded 
                      will be saved in this attribute.</div></div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>tot_occ</div><div class='tag_event_attribute_value'>The total occurrences of this event will be saved in 
                      this attribute.</div></div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>min_dur</div><div class='tag_event_attribute_value'>The minimum duration of any event in milliseconds 
                      recorded will be saved in this attribute.</div></div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>avg_occ</div><div class='tag_event_attribute_value'>The number of occurrences of this event per second over 
                      the duration of all events is recorded in this attribute.</div></div></div><div class='tag_event'><div class='tag_event_name'>cursor.FIELD_VALUE Event</div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>avg_int</div><div class='tag_event_attribute_value'>this event will be generated for every FIELD in the 
                      monitors attribute and it will have the format 
                      FIELD_VALUE.avg_int being that the VALUE is one of the
                      various values that FIELD had. So for each VALUE that
                      the FIELD can assume there will be another event 
                      generated containing the average amount of time that the
                      specified field was in the VALUE state.</div></div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>min_int</div><div class='tag_event_attribute_value'>this event will be generated for every FIELD in the 
                      monitors attribute and it will have the format 
                      FIELD_VALUE.min_int being that the VALUE is one of the
                      various values that FIELD had. So for each VALUE that
                      the FIELD can assume there will be another event 
                      generated containing the minimum interval during which
                      that VALUE occurred without any changes.</div></div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>max_int</div><div class='tag_event_attribute_value'>this event will be generated for every FIELD in the 
                      monitors attribute and it will have the format 
                      FIELD_VALUE.max_int being that the VALUE is one of the
                      various values that field had. So for each VALUE that
                      the FIELD can assume there will be another event 
                      generated containing the maximum interval during which
                      that VALUE occurred without any changes.</div></div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>tot_int</div><div class='tag_event_attribute_value'>this event will be generated for every FIELD in the 
                      monitors attribute and it will have the format 
                      FIELD_VALUE.avg_int being that the VALUE is one of the
                      various values that FIELD had. So for each VALUE that
                      the FIELD can assume there will be another event 
                      generated containing the total amount of time that the
                      specified field was in the VALUE state.</div></div></div><div class='tag_event'><div class='tag_event_name'>cursor.fieldname Event</div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>tot_val</div><div class='tag_event_attribute_value'>Each field of the specified event that is of a number 
                      type will have its total value calculated and recorded
                      in this attribute.</div></div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>max_val</div><div class='tag_event_attribute_value'>Each field of the specified event that is of a number 
                      type will have its maximum value calculated and recorded
                      in this attribute.</div></div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>avg_val</div><div class='tag_event_attribute_value'>Each field of the specified event that is of a number 
                      type will have its average value calculated and recorded
                      in this attribute.</div></div><div class='tag_event_attribute'><div class='tag_event_attribute_name'>min_val</div><div class='tag_event_attribute_value'>Each field of the specified event that is of a number 
                      type will have its minimum value calculated and recorded
                      in this attribute.</div></div></div></div><div id='required_attributes_label'>Required Attributes</div><div id='required_attributes'><div class='attribute'><div class='attribute_name'>cursor</div><div class='attribute_desc'>Identifies the cursor to use when calculating statistics.</div></div><div class='attribute'><div class='attribute_name'>event</div><div class='attribute_desc'>Specifies the event name to attach the statistics that 
                are calculated.</div></div></div><div class='tag_examples_label'>Usage Examples</div><div class='tag_examples'><div class='tag_example_container'><div class='tag_example_title'>Example #1</div><div class='tag_example'><div class='xml_code'>
<!-- converted by xmlverbatim.xsl 1.1, (c) O. Becker -->
<div class="xmlverb-default">&lt;<span class="xmlverb-element-name">script</span><span class="xmlverb-ns-name"> xmlns</span>="<span class="xmlverb-ns-uri">http://dtf.org/v1</span>"&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">query</span> <span class="xmlverb-attr-name">cursor</span>="<span class="xmlverb-attr-content">cursor1</span>" <span class="xmlverb-attr-name">event</span>="<span class="xmlverb-attr-content">dtf.event</span>" <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">${recorder.type}</span>" <span class="xmlverb-attr-name">uri</span>="<span class="xmlverb-attr-content">storage://OUTPUT/${recorder.filename}</span>"&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">where</span>&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">eq</span> <span class="xmlverb-attr-name">op1</span>="<span class="xmlverb-attr-content">runid</span>" <span class="xmlverb-attr-name">op2</span>="<span class="xmlverb-attr-content">${runid}</span>" /&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;/<span class="xmlverb-element-name">where</span>&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;</span>&lt;/<span class="xmlverb-element-name">query</span>&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">record</span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">uri</span>="<span class="xmlverb-attr-content">property://txtrecorder</span>"&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">stats</span> <span class="xmlverb-attr-name">cursor</span>="<span class="xmlverb-attr-content">cursor1</span>" <span class="xmlverb-attr-name">event</span>="<span class="xmlverb-attr-content">stats</span>" /&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;</span>&lt;/<span class="xmlverb-element-name">record</span>&gt;&lt;/<span class="xmlverb-element-name">script</span>&gt;</div>
</div></div></div><div class='tag_example_container'><div class='tag_example_title'>Example #2</div><div class='tag_example'><div class='xml_code'>
<!-- converted by xmlverbatim.xsl 1.1, (c) O. Becker -->
<div class="xmlverb-default">&lt;<span class="xmlverb-element-name">script</span><span class="xmlverb-ns-name"> xmlns</span>="<span class="xmlverb-ns-uri">http://dtf.org/v1</span>"&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">query</span> <span class="xmlverb-attr-name">cursor</span>="<span class="xmlverb-attr-content">cursor1</span>" <span class="xmlverb-attr-name">event</span>="<span class="xmlverb-attr-content">dtf.event</span>" <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">${recorder.type}</span>" <span class="xmlverb-attr-name">uri</span>="<span class="xmlverb-attr-content">storage://OUTPUT/${recorder.filename}</span>" /&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">record</span> <span class="xmlverb-attr-name">type</span>="<span class="xmlverb-attr-content">object</span>" <span class="xmlverb-attr-name">uri</span>="<span class="xmlverb-attr-content">property://txtrecorder</span>"&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">stats</span> <span class="xmlverb-attr-name">cursor</span>="<span class="xmlverb-attr-content">cursor1</span>" <span class="xmlverb-attr-name">event</span>="<span class="xmlverb-attr-content">stats</span>" /&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;</span>&lt;/<span class="xmlverb-element-name">record</span>&gt;&lt;/<span class="xmlverb-element-name">script</span>&gt;</div>
</div></div></div></div></body></html>