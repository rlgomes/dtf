<html>
    <head>
    <link rel='stylesheet' href='../main.css' type='text/css'>
        <title>Http_server</title>
    </head>
    <body id='body'>
<div id='nav'>
<a href='../index.html'>Home</a></div>
<div id='tag_title' title='com.yahoo.dtf.actions.http.server.Http_server'>Http_server</div>
<div id='tag_description'>
This tag will startup an HTTP server and bind it to the 
               host and port you specify. It will then create HTTP listeners
               for the path and methods you specify and allow you to receive
               each of the requests and do something with it. Now currently 
               each listener has as many threads as requests can come in, so 
               there is no throttling or pooling of request handling threads. 
               We will add this in the near future when it becomes a problem.
               <br/>
               The other thing to note bout the http_server tag is that it 
               doe snot currently allow you to define any HTTP config values
               but can easily be adapted to do so in the near future. 
               
               <p>
               Events available within your http_listener include the same 
               event attributes that would be visible on the client side when
               using any of the DTF HTTP tags and also include the following:
               </p>
               
               <dl>
                  <b><dt>http.[METHOD].path<dt></b>
                  <dd>
                  This attribute contains the exact path that was hit with 
                  your HTTP request.
                  </dd>
               </dl></div>
<div class='tag_children_label'>Children Tags</div><div class='tag_children'><a href='http_listener.html'>http_listener</a></div><div class='tag_examples_label'>Usage Examples</div><div class='tag_examples'><div class='tag_example_container'><div class='tag_example_title'>Example #1</div><div class='tag_example'><div class='xml_code'>
<!-- converted by xmlverbatim.xsl 1.1, (c) O. Becker -->
<div class="xmlverb-default">&lt;<span class="xmlverb-element-name">http_server</span> <span class="xmlverb-attr-name">port</span>="<span class="xmlverb-attr-content">8080</span>"&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">http_listener</span> <span class="xmlverb-attr-name">method</span>="<span class="xmlverb-attr-content">PUT</span>" <span class="xmlverb-attr-name">path</span>="<span class="xmlverb-attr-content">/oddtest</span>"&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">mod</span> <span class="xmlverb-attr-name">op1</span>="<span class="xmlverb-attr-content">${http.put.headers.number}</span>" <span class="xmlverb-attr-name">op2</span>="<span class="xmlverb-attr-content">2</span>" <span class="xmlverb-attr-name">result</span>="<span class="xmlverb-attr-content">result</span>" /&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">eq</span> <span class="xmlverb-attr-name">op1</span>="<span class="xmlverb-attr-content">${result}</span>" <span class="xmlverb-attr-name">op2</span>="<span class="xmlverb-attr-content">0</span>" /&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">then</span>&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">http_response</span> <span class="xmlverb-attr-name">message</span>="<span class="xmlverb-attr-content">${http.put.headers.number} is even</span>" <span class="xmlverb-attr-name">status</span>="<span class="xmlverb-attr-content">200</span>" /&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;/<span class="xmlverb-element-name">then</span>&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">else</span>&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">http_response</span> <span class="xmlverb-attr-name">message</span>="<span class="xmlverb-attr-content">${http.put.headers.number} is odd</span>" <span class="xmlverb-attr-name">status</span>="<span class="xmlverb-attr-content">200</span>" /&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;/<span class="xmlverb-element-name">else</span>&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;/<span class="xmlverb-element-name">if</span>&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;</span>&lt;/<span class="xmlverb-element-name">http_listener</span>&gt;<span class="xmlverb-text"><br>
</span>&lt;/<span class="xmlverb-element-name">http_server</span>&gt;</div>
</div></div></div><div class='tag_example_container'><div class='tag_example_title'>Example #2</div><div class='tag_example'><div class='xml_code'>
<!-- converted by xmlverbatim.xsl 1.1, (c) O. Becker -->
<div class="xmlverb-default">&lt;<span class="xmlverb-element-name">http_server</span> <span class="xmlverb-attr-name">port</span>="<span class="xmlverb-attr-content">8082</span>"&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">http_listener</span> <span class="xmlverb-attr-name">method</span>="<span class="xmlverb-attr-content">PUT</span>" <span class="xmlverb-attr-name">path</span>="<span class="xmlverb-attr-content">/echo-data</span>"&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">log</span>&gt;<span class="xmlverb-text">received&nbsp;[${http.put.body}]&nbsp;in&nbsp;the&nbsp;HTTP&nbsp;body</span>&lt;/<span class="xmlverb-element-name">log</span>&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;<span class="xmlverb-element-name">log</span>&gt;<span class="xmlverb-text">received&nbsp;headers&nbsp;[${http.headers}]</span>&lt;/<span class="xmlverb-element-name">log</span>&gt;<span class="xmlverb-text"><br>
&nbsp;&nbsp;&nbsp;</span>&lt;/<span class="xmlverb-element-name">http_listener</span>&gt;<span class="xmlverb-text"><br>
</span>&lt;/<span class="xmlverb-element-name">http_server</span>&gt;</div>
</div></div></div><div class='tag_example_container'><div class='tag_example_title'>Example #3</div><div class='tag_example'><div class='xml_code'>
<!-- converted by xmlverbatim.xsl 1.1, (c) O. Becker -->
<div class="xmlverb-default">&lt;<span class="xmlverb-element-name">http_server</span> <span class="xmlverb-attr-name">command</span>="<span class="xmlverb-attr-content">stop</span>" <span class="xmlverb-attr-name">port</span>="<span class="xmlverb-attr-content">8082</span>" /&gt;</div>
</div></div></div></div></body></html>